"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5532],{81073:function(e,l,s){s.d(l,{P:function(){return a}});var r=s(52322),t=s(17063),n=s(66582);let a=e=>{let{header:l,children:s,containerClassName:a,innerClassName:i,childrenClassName:c,handleScroll:o}=e;return(0,r.jsx)("div",{className:(0,t.cn)("h-full w-full flex flex-row justify-center",a),onScroll:o,children:(0,r.jsx)("div",{className:(0,t.cn)("flex h-full w-full flex-col justify-between px-4 sm:px-8 pt-6 max-w-7xl items-center",{"p-0":n.tq}),children:(0,r.jsxs)("div",{className:(0,t.cn)("w-full h-full",i),children:[l,(0,r.jsx)("ol",{className:(0,t.cn)("flex flex-col",c),children:s})]})})})}},80783:function(e,l,s){s.d(l,{k:function(){return o}});var r=s(52322),t=s(17063),n=s(27617),a=s(98614),i=s(90122);let c=e=>{let{type:l,className:s,size:t,filled:n}=e,a={width:t,height:t,className:s};return"interactions"===l?n?(0,r.jsx)(i.qK,{...a}):(0,r.jsx)(i.kB,{...a}):n?(0,r.jsx)(i.eL,{...a}):(0,r.jsx)(i.lb,{...a})},o=e=>{let{num:l,type:s,capitalized:i,iconProps:o,withPrecedingDot:m,textClassname:d}=e,{t:u}=(0,a.$G)(),x="interactions"===s?"chats":"likes";return(0,r.jsxs)(r.Fragment,{children:[!!m&&(0,r.jsx)("p",{children:"â€¢"}),!!o&&(0,r.jsx)(c,{type:s,...o}),(0,r.jsx)("p",{className:(0,t.cn)("text-sm sm:text-md whitespace-nowrap",d),children:i?u("Common.".concat(x),{count:l,formattedCount:n.Wj.formatNumber(l)}):u("Common.num-".concat(x),{count:l,num:n.Wj.formatNumber(l)})})]})}},52914:function(e,l,s){s.d(l,{d:function(){return h}});var r=s(52322),t=s(566),n=s(17063),a=s(27617),i=s(94359),c=s(5632),o=s(66582),m=s(81073),d=s(18818),u=s(62593),x=s(3988);let f=()=>{let e=(0,d.Dv)(),{user:l}=(0,t.a)();return l?null:(0,r.jsx)("div",{className:"flex flex-row w-full justify-start",children:(0,r.jsx)(u.Z,{href:a.nN.home(),className:(0,n.cn)("flex items-center h-fit",e?"pt-2":"pt-1",{"pl-2":e}),analytics:{name:"linkOpened",properties:{referrer:"LogoHeaderSignedOut",link:a.nN.home()}},children:(0,r.jsx)(x.t,{mini:e})})})},h=e=>{let{children:l,showFullHeader:s,containerClassName:d,headerClassName:u,childrenClassName:x,handleScroll:h}=e,{asPath:p}=(0,c.useRouter)(),j=p.startsWith(a.nN.chat("")),{user:v}=(0,t.a)();return v?l:(0,r.jsx)(m.P,{header:s||j?(0,r.jsx)(i.$C,{hideSearch:!0,className:u}):(0,r.jsx)(f,{}),containerClassName:(0,n.cn)(j&&"pt-1 absolute top-0",j&&!o.tq&&"overflow-y-auto",d),innerClassName:(0,n.cn)(j&&o.tq&&"overflow-y-auto"),childrenClassName:(0,n.cn)(j&&"h-full w-full items-center",x),handleScroll:h,children:l})}},94359:function(e,l,s){s.d(l,{uN:function(){return $},$C:function(){return E}});var r=s(52322),t=s(63554),n=s(48683),a=s(24632),i=s(74943),c=s(3988),o=s(27617),m=s(11403),d=s(62593);function u(e){var l,s,t,n,a,i;let{user:c}=e;return(0,r.jsxs)(d.Z,{className:"flex",href:o.nN.profile(null!==(a=null===(l=c.user)||void 0===l?void 0:l.username)&&void 0!==a?a:""),analytics:{name:"elementClicked",properties:{referrer:"HomeHeader",target:o.nN.profile(null!==(i=null===(s=c.user)||void 0===s?void 0:s.username)&&void 0!==i?i:"")}},children:[(0,r.jsx)("div",{className:"w-[36px] h-[36px] flex items-center justify-center",children:(0,r.jsx)(m.a,{name:c.name||c.email||"",size:20,src:null===(n=c.user)||void 0===n?void 0:null===(t=n.account)||void 0===t?void 0:t.avatar_file_name,rounded:!0})}),(0,r.jsx)("div",{className:"text-xl flex flex-auto flex-col justify-center text-left ml-1",children:(0,r.jsx)("p",{children:null==c?void 0:c.name})})]})}var x=s(65371),f=s(44460),h=s(50986),p=s(14976),j=s(90122),v=s(23279),N=s(18818),g=s(17063),w=s(5632),y=s(2784),b=s(98614),C=s(76492),S=s(56462);function _(e){let{isSignedOut:l,getCharacterHref:s,placeholder:t,className:n,containerClassName:a,inputClassName:i}=e,{t:c}=(0,b.$G)(),m=(0,N.Dv)(),d=s||o.nN.chat,u=t||c("Search.placeholder"),{searchQuery:x,characterResults:_,isSearchLoading:k,clearSearch:z,onChangeSearchText:O,showSearchError:q,refetchSearch:H,submittedSearchQuery:P}=(0,p.HP)(void 0,!1,p.Sc.characters,"Searchbar"),$=(0,y.useRef)(null),D=(0,w.useRouter)(),E=_&&P;return(0,r.jsxs)("div",{className:a,children:[!!E&&(0,r.jsx)("div",{className:"absolute left-0 top-0 z-30 h-screen w-screen bg-black opacity-30",onClick:z}),(0,r.jsx)("div",{className:(0,g.cn)("relative h-10 w-64 md:w-96",{"md:top-6":!!E&&!l},a),children:(0,r.jsxs)("div",{className:(0,g.cn)("absolute z-40 flex gap-2 w-full max-w-3xl border-spacing-1 border-divider flex-row self-center items-center rounded-full bg-surface-elevation-1 p-4 placeholder:text-placeholder",n),children:[(0,r.jsx)(v.zx,{"aria-label":c("Common.search"),variant:"ghost",isIconOnly:!0,onPress:()=>{if(x.length>0)D.push(o.nN.search(x)),f.iN.searchAttempt({referrer:"Searchbar",query:x});else{var e;null===(e=$.current)||void 0===e||e.focus()}},className:"h-fit min-w-fit w-fit",children:k?(0,r.jsx)(C.$,{size:16}):(0,r.jsx)(j.W1,{height:"1.25em",className:"ml-1"})}),(0,r.jsx)(S.I,{className:(0,g.cn)("rounded-full rounded-l-none border-none bg-transparent placeholder:text-muted-foreground p-0 relative",i),type:"text",ref:$,placeholder:u,onChange:e=>O(e.target.value),value:x,onKeyDown:e=>{"Enter"===e.key&&(D.push(o.nN.search(x)),f.iN.searchAttempt({referrer:"Searchbar",query:x}))}}),!!x&&(0,r.jsx)(v.zx,{variant:"ghost",size:"sm",isIconOnly:!0,className:"mr-2 h-fit min-w-fit w-fit",onPress:z,children:(0,r.jsx)(j.Tw,{height:"1.25em",color:"var(--icon-secondary)"})})]})}),!!q&&(0,r.jsx)("div",{className:"flex max-w-3xl justify-center self-center sm:px-12 ",children:(0,r.jsxs)("div",{className:(0,g.cn)("absolute z-40 mt-2 md:mt-8 flex max-h-[calc(100vh-8rem)] w-96 flex-col overflow-y-scroll rounded-md bg-card px-2",{"md:mt-2":l}),children:[(0,r.jsx)("p",{className:"m-4 text-center",children:c("Search.something-went-wrong-loading-search-results")}),(0,r.jsx)(v.zx,{className:"my-4 w-48 self-center",onPress:()=>{f.iN.searchAttempt({referrer:"Searchbar",type:"retry"}),H()},color:"secondary",children:c("Common.try-again")})]})}),!!E&&(0,r.jsx)("div",{className:"flex max-w-3xl justify-end md:justify-center self-center py-3",children:(0,r.jsxs)("div",{className:(0,g.cn)("absolute z-50 mt-2 md:mt-8 flex max-h-[calc(100vh-8rem)] max-w-[90dvw] sm:w-96 overflow-y-scroll rounded-spacing-l bg-surface-elevation-2 px-2 flex flex-col",{"md:mt-2":l}),children:[!!_&&_.length>0&&_.map(e=>(0,r.jsx)(h.J,{referrer:"Searchbar",src:e.avatar_file_name,href:d(e.external_id),name:e.participant__name,title:e.title?e.title:e.greeting,author:e.user__username,interactions:e.participant__num_interactions,upvotes:e.upvotes,nameClassname:"text-md sm:text-lg",titleClassname:"text-sm sm:text-md",infoClassname:"text-sm sm:text-md",avatarImageSize:m?52:60,searchResultCharacterIds:null==_?void 0:_.map(e=>e.external_id),id:e.external_id},e.external_id)),(null==_?void 0:_.length)===0&&(0,r.jsx)("div",{className:"p-4",children:c("Search.no-results")})]})})]})}var k=s(566),z=s(85129),O=s(25706),q=s(66582),H=s(15584),P=s(48058);function $(){let{user:e}=(0,k.a)();return e?(0,r.jsx)(D,{user:e}):(0,r.jsx)(E,{})}let D=e=>{let{user:l}=e,{t:s}=(0,b.$G)(),t=(0,H.BF)(O.zE);return(0,r.jsxs)("div",{className:(0,g.cn)("flex justify-end items-end lg:justify-between pr-4",{"ml-6 lg:ml-0":!t}),children:[(0,r.jsxs)(i.a2,{className:"hidden lg:flex flex-col gap-1",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:s("Home.welcome-back")}),(0,r.jsx)(u,{user:l})]}),(0,r.jsx)("div",{className:"flex justify-end ml-6 gap-3",children:(0,r.jsx)(_,{isSignedOut:!1})})]})},E=e=>{let{hideSearch:l,className:s}=e,i=(0,H.BF)(O.Z8),{user:m}=(0,k.a)(),{t:u}=(0,b.$G)(),f=(0,N.Dv)(),h=(0,N.Fv)(),{asPath:p}=(0,w.useRouter)(),j=p.startsWith(o.nN.chat("")),v=(0,n.wz)(t.b.SignupPromptOnScroll),y=i||!v&&(!!j||q.tq);(0,z.jB)({disabled:!y});let C=(0,P.useExperiment)(a.F5.SignupToChat).config.get(a.sD.SignupToChat,!1);return m?(0,r.jsx)("div",{className:"flex justify-end items-end pr-4 w-full",children:(0,r.jsx)(_,{isSignedOut:!0})}):(0,r.jsxs)("div",{className:(0,g.cn)("flex gap-3 w-full justify-between fixed top-0 left-0 z-10 bg-background py-5 px-4",s),children:[(0,r.jsxs)("div",{className:(0,g.cn)("flex flex-row",{"w-full":h||l}),children:[(0,r.jsx)(d.Z,{href:o.nN.home(),className:(0,g.cn)("flex items-center mr-6 h-fit",f?"pt-2":"pt-1",{"pl-2":f}),analytics:{name:"linkOpened",properties:{referrer:"HomeHeader",link:o.nN.home()}},children:(0,r.jsx)(c.t,{mini:f})}),(0,r.jsxs)("div",{className:(0,g.cn)("flex flex-row w-full justify-end gap-3",h||l?"justify-end":"justify-start"),children:[(0,r.jsx)(x.Q,{type:"signup",copyOverride:C?u("Signup.toChat"):void 0}),(0,r.jsx)(x.Q,{type:"signin",copyOverride:u("Common.login")})]})]}),!h&&!l&&(0,r.jsx)(_,{placeholder:u("Common.search").toString(),isSignedOut:!0,className:(0,g.cn)("max-w-[412px]",q.tq?"py-[10px] px-2":"p-[10px]"),inputClassName:"placeholder:text-primary",containerClassName:"w-full md:w-full min-[140px] max-w-[412px]"})]})}}}]);