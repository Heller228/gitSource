(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{87314:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(34036)}])},80783:function(e,t,a){"use strict";a.d(t,{k:function(){return o}});var r=a(52322),l=a(17063),s=a(27617),n=a(98614),i=a(90122);let c=e=>{let{type:t,className:a,size:l,filled:s}=e,n={width:l,height:l,className:a};return"interactions"===t?s?(0,r.jsx)(i.qK,{...n}):(0,r.jsx)(i.kB,{...n}):s?(0,r.jsx)(i.eL,{...n}):(0,r.jsx)(i.lb,{...n})},o=e=>{let{num:t,type:a,capitalized:i,iconProps:o,withPrecedingDot:d,textClassname:u}=e,{t:h}=(0,n.$G)(),m="interactions"===a?"chats":"likes";return(0,r.jsxs)(r.Fragment,{children:[!!d&&(0,r.jsx)("p",{children:"â€¢"}),!!o&&(0,r.jsx)(c,{type:a,...o}),(0,r.jsx)("p",{className:(0,l.cn)("text-sm sm:text-md whitespace-nowrap",u),children:i?h("Common.".concat(m),{count:t,formattedCount:s.Wj.formatNumber(t)}):h("Common.num-".concat(m),{count:t,num:s.Wj.formatNumber(t)})})]})}},98208:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(17380),l=a(19206);function s(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t){let{data:t}=r.h.character.infoCached.useQuery({externalId:e},{enabled:!!e,cacheTime:l.yV,staleTime:l.yV,refetchInterval:l.yV});return{info:null!=t?t:null}}let{data:a}=r.h.character.info.useQuery({externalId:e},{enabled:!!e});return{info:null!=a?a:null}}},34036:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return e5},default:function(){return e9},runtime:function(){return e8}});var r=a(52322),l=a(12491),s=a(17063),n=a(63554),i=a(48683),c=a(566),o=a(17380),d=a(27617),u=a(19206);function h(){var e,t;let{user:a}=(0,c.a)(),{data:r,isLoading:l}=o.h.discovery.recommended.useQuery({},{enabled:!!a,cacheTime:u.yV,staleTime:u.yV,refetchInterval:u.yV}),{data:s,isLoading:n}=o.h.discovery.recommendedAnonymous.useQuery({},{enabled:!a,cacheTime:u.yV,staleTime:u.yV,refetchInterval:u.yV});return{recommendedCharacters:null!==(t=null!==(e=null==r?void 0:r.characters)&&void 0!==e?e:null==s?void 0:s.characters)&&void 0!==t?t:[],isLoading:l&&!!a||n&&!a}}var m=a(27377),x=a(18818),f=a(25706),p=a(82876),v=a(2784);let g=()=>{let e=(0,p.useSearchParams)(),t=null==e?void 0:e.get("settings");(0,v.useEffect)(()=>{t&&(f.bB.value=!0)},[t])};var j=a(23279),y=a(90122),w=a(57352),N=a(96577),b=a.n(N);let S=e=>{let{controls:t,variants:a,children:l,className:n}=e;return(0,r.jsx)(w.E.div,{className:(0,s.cn)("absolute",n),initial:"hidden",animate:t,variants:a,children:l})},C=e=>{let{alt:t,controls:a,variants:l}=e;return(0,r.jsx)(S,{controls:a,variants:l,children:(0,r.jsx)(b(),{className:"rounded-full",src:d.Wj.getHomeAssetImageSource(t),alt:t,width:15,height:15})})},_=e=>{let{controls:t,variants:a,className:l}=e;return(0,r.jsx)(S,{controls:t,variants:a,children:(0,r.jsx)(y.uA,{height:"32px",width:"32px",className:l})})},k=e=>{let{text:t,controls:a,variants:l,className:n}=e;return(0,r.jsx)(S,{controls:a,variants:l,children:(0,r.jsx)("div",{className:(0,s.cn)("bg-surface-elevation-3 px-3 py-1 w-fit rounded-full",n),children:t})})};var I=a(57035),A=a(61336),H=a(19209);function q(){let e=!1,t=new Set,a={subscribe:e=>(t.add(e),()=>void t.delete(e)),start(a,r){(0,I.k)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let l=[];return t.forEach(e=>{l.push((0,H.d)(e,a,{transitionOverride:r}))}),Promise.all(l)},set:a=>((0,I.k)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{(0,A.gg)(e,a)})),stop(){t.forEach(e=>{!function(e){e.values.forEach(e=>e.stop())}(e)})},mount:()=>(e=!0,()=>{e=!1,a.stop()})};return a}var G=a(3105),z=a(23617);let E=function(){let e=(0,G.h)(q);return(0,z.L)(e.mount,[]),e},P={some:0,all:1};var R=a(66582),F=a(98614);let M=(e,t,a,r)=>{var l,s,n,i;return{hidden:{scale:null!==(l=null==a?void 0:a.hidden)&&void 0!==l?l:.2,opacity:null!==(s=null==r?void 0:r.hidden)&&void 0!==s?s:0,...null!=t?t:{top:162,left:300}},visible:{scale:null!==(n=null==a?void 0:a.visible)&&void 0!==n?n:1,opacity:null!==(i=null==r?void 0:r.visible)&&void 0!==i?i:1,transition:{ease:"easeInOut",duration:.75*Math.random()+.15},...e}}},O=()=>{let{t:e}=(0,F.$G)(),t=E(),a=(0,v.useRef)(null),l=function(e,{root:t,margin:a,amount:r,once:l=!1}={}){let[s,n]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{if(!e.current||l&&s)return;let i={root:t&&t.current||void 0,margin:a,amount:r};return function(e,t,{root:a,margin:r,amount:l="some"}={}){let s=function(e,t,a){var r;if("string"==typeof e){let l=document;t&&((0,I.k)(!!t.current,"Scope provided, but no element detected."),l=t.current),a?(null!==(r=a[e])&&void 0!==r||(a[e]=l.querySelectorAll(e)),e=a[e]):e=l.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}(e),n=new WeakMap,i=new IntersectionObserver(e=>{e.forEach(e=>{let a=n.get(e.target);if(!!a!==e.isIntersecting){if(e.isIntersecting){let a=t(e);"function"==typeof a?n.set(e.target,a):i.unobserve(e.target)}else a&&(a(e),n.delete(e.target))}})},{root:a,rootMargin:r,threshold:"number"==typeof l?l:P[l]});return s.forEach(e=>i.observe(e)),()=>i.disconnect()}(e.current,()=>(n(!0),l?void 0:()=>n(!1)),i)},[t,e,a,l]),s}(a);return((0,v.useEffect)(()=>{l?t.start("visible"):t.start("hidden")},[t,l]),R.tq)?null:(0,r.jsx)("div",{className:"w-full flex justify-center",ref:a,children:(0,r.jsxs)("div",{className:"w-[600px] h-[250px] relative",children:[(0,r.jsx)(C,{controls:t,variants:M({top:80,left:150}),alt:"zeus"}),(0,r.jsx)(_,{controls:t,className:"text-accent",variants:M({top:90,left:50})}),(0,r.jsx)(C,{controls:t,alt:"noblewoman",variants:M({top:140,left:110})}),(0,r.jsx)(C,{controls:t,variants:M({top:180,left:20},void 0,void 0,{hidden:.2,visible:.5}),alt:"einstein"}),(0,r.jsx)(k,{text:e("Home.witty"),controls:t,variants:M({top:200,left:90})}),(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(S,{controls:t,variants:M({top:125,left:184},{top:125,left:300},{hidden:0,visible:1}),children:(0,r.jsx)(b(),{className:"opacity-50 rounded-spacing-s",src:d.Wj.getHomeAssetImageSource("philosopher"),alt:"philosopher",width:75,height:75,priority:!0,fetchPriority:"high",quality:25})}),(0,r.jsx)(S,{className:"z-10",controls:t,variants:M({top:100,left:240},{top:100,left:240,x:0,y:0},{hidden:0,visible:1},{hidden:1,visible:1}),children:(0,r.jsx)(b(),{className:"rounded-spacing-s",src:d.Wj.getHomeAssetImageSource("zeus"),alt:"zeus",width:125,height:125,priority:!0,fetchPriority:"high",quality:25})}),(0,r.jsx)(S,{controls:t,variants:M({top:125,left:340},{top:125,left:240},{hidden:0,visible:1}),children:(0,r.jsx)(b(),{className:"opacity-50 rounded-spacing-s",src:d.Wj.getHomeAssetImageSource("noblewoman"),alt:"noblewoman",width:75,height:75,priority:!0,fetchPriority:"high",quality:25})})]}),(0,r.jsx)(C,{controls:t,alt:"philosopher",variants:M({top:80,left:440})}),(0,r.jsx)(k,{text:e("Home.mentor"),controls:t,variants:M({top:97,left:520}),className:"text-accent"}),(0,r.jsx)(_,{controls:t,variants:M({top:150,left:460})}),(0,r.jsx)(C,{controls:t,alt:"noblewoman",variants:M({top:180,left:540},void 0,void 0,{hidden:.2,visible:.5})}),(0,r.jsx)(C,{controls:t,alt:"zeus",variants:M({top:230,left:500},void 0,void 0,{hidden:.2,visible:.5})})]})})};var T=a(39097),W=a.n(T);let U=()=>{let{t:e}=(0,F.$G)();return(0,r.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[(0,r.jsx)(O,{}),(0,r.jsxs)("div",{className:"my-spacing-xl max-w-[480px] w-full flex flex-col gap-spacing-s  items-center",children:[(0,r.jsx)("p",{className:"text-display",children:e("Home.create-a-character")}),(0,r.jsx)("p",{className:"text-muted-foreground flex text-center text-md",children:e("Home.not-vibing")}),(0,r.jsx)(j.zx,{as:W(),href:d.nN.character(),startContent:(0,r.jsx)(y.qz,{height:"16px",width:"16px"}),children:e("Home.create-a-character")})]})]})};var L=a(74943),Q=a(65239),Z=a(7702),D=a(24632),B=a(48058),V=a(38837);function Y(e){let{height:t=280,width:a=280,children:l,className:n}=e,[i,c]=(0,v.useState)(30),[o,d]=(0,v.useState)(0);return(0,r.jsx)("div",{onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientY-t.top,{offsetWidth:l}=e.currentTarget,{offsetHeight:s}=e.currentTarget;c(a/l*100),d(r/s*100)},className:(0,s.cn)("rounded-spacing-m p-4 flex-col flex gap-4 card-effect",n),style:{height:t,width:a,background:"radial-gradient(at \n              ".concat(i,"% ").concat(o,"%, var(--accent), var(--primary-foreground))")},children:l})}var K=a(62593),$=a(94766),X=a(98208);function J(e){var t;let{characterId:a}=e,{t:l}=(0,F.$G)(),{info:s}=(0,X.Z)(a);if(!s||!s.character)return(0,r.jsx)(Y,{children:(0,r.jsx)($.O,{})});let{character:n}=s;return(0,r.jsx)(Y,{children:!!n&&(0,r.jsxs)(K.Z,{href:d.nN.chat(n.external_id),className:"flex flex-col gap-4 h-full w-full group",analytics:{name:"characterSelected",properties:{character_id:n.external_id,referrer:"CharacterScenario"}},children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(V.B7,{name:n.name,size:48,src:n.avatar_file_name}),(0,r.jsx)("div",{children:n.name})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between h-full flex-1",children:[(0,r.jsx)("div",{className:"max-h-36 overflow-hidden line-clamp-3 text-lg",children:null!==(t=n.greeting)&&void 0!==t?t:n.title}),(0,r.jsx)("div",{className:"text-muted-foreground font-sans font-light group-hover:text-foreground",children:l("Common.reply")})]})]})})}var ee=a(44460),et=a(59611);function ea(e){let{scenario:t,flipScenario:a}=e,{t:l}=(0,F.$G)(),[s,n]=(0,v.useState)(0),i=(0,v.useRef)(null),[c,o]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{o(!0)},[]),(0,r.jsxs)("div",{className:"h-[300px] bg-contain overflow-hidden rounded-lg rounded-r-none absolute w-full z-0",style:{minWidth:400,maxWidth:800},children:[!!c&&(0,r.jsx)("video",{ref:i,autoPlay:!0,muted:!0,playsInline:!0,controls:!1,style:{width:800,height:300},preload:"auto",className:"object-cover object-center select-none",id:"hero-scenario-video",children:(0,r.jsx)("source",{src:t.videoSrc,type:"video/mp4"})}),(0,r.jsx)("div",{className:"m-h-[300px] h-[300px] absolute z-10 top-0",style:{width:800,backgroundImage:"linear-gradient(to left, var(--background), var(--hero-transparent))"}}),(0,r.jsxs)("div",{className:"absolute z-10 p-10 justify-between h-full items-start flex flex-col top-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground text-lg",children:l(t.question)}),(0,r.jsx)("div",{className:"text-display typing-effect",children:l(t.answer)})]}),(0,r.jsx)(j.zx,{autoFocus:!1,onPress:()=>{ee.iN.elementClicked({referrer:"HeroScenario",value:"FlipScenario"}),n(s+360),a()},isIconOnly:!0,variant:"ghost",className:"bg-[--transparency-4] text-[var(--G150)]",children:(0,r.jsx)(w.E.div,{animate:{rotate:s},children:(0,r.jsx)(L.a2,{children:(0,r.jsx)(et.P$5,{size:18})})})})]})]})}let er={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.1+.05*e}})},el=[{question:"Scenarios.what-do-you-want-to-do",answer:"Scenarios.travel.go-on-an-adventure",characterIds:["GS_OvZ-lQyol_APHNZxOoHnc3LaanTvKeyROJhThpTw","aOfH1UKakUv-x3uNz8mG13kQx4lt28-RFkDcSc6gCck"],videoSrc:"https://characterai.io/static/editorial/scenarios/travel_s.mp4"},{question:"Scenarios.what-do-you-want-to-do",answer:"Scenarios.creativity.nurture-your-creativity",characterIds:["arSFby5bCipvQXcsMxxkYLRALdWZOC8Ub5pFtGklplc","v3t5o5EX32l-gB77NYX3l9Rh8C1lIGYSkI-HVNSg7r0"],videoSrc:"https://characterai.io/static/editorial/scenarios/creativity_s.mp4"},{question:"Scenarios.exercise.time-to-fell-your-best",answer:"Scenarios.exercise.get-fit-and-healthy",characterIds:["zADxAm8Kj3mG-Q_-BW4Sid_2R93_6Wbwn624Dcj97eA","-5jgnIpNmQuiuD6bL55MOtASTbvscvGR_cqvfqAE08M"],videoSrc:"https://characterai.io/static/editorial/scenarios/waterfall.mp4"},{question:"Scenarios.who-do-you-want-talk-to",answer:"Scenarios.support.trusted-circle",characterIds:["MOShz6OM2KhNGtuigfTGuLEM9UtSKYFv4P8cKuMTPgg","tTAS4lqAmkceojvxPBEE79OtxoBbXmsIntaQ6RG_4kI"],videoSrc:"https://characterai.io/static/editorial/scenarios/lighthouse.mp4"},{question:"Scenarios.what-do-you-want-to-do",answer:"Scenarios.learn.learn-something-new",characterIds:["nW7KYac14FpdUnugT4811pD-zHBCUZmfNU68x9oKoI0","S0nUbNqZf-iuFYxCO4NJsanAoZHhbNLBNB-eUHc-xZY"],videoSrc:"https://characterai.io/static/editorial/scenarios/library.mp4"},{question:"Scenarios.what-do-you-want-to-do",answer:"Scenarios.challenge.epic-challenges-await",characterIds:["tkhOCDS13d53UxbMHPspMMsCuaMHvlvf8XyPs2NnzHI","6AVP64tYv-bpx35cjZz_liuhqbksYo7BRYgVepiKO0U"],videoSrc:"https://characterai.io/static/editorial/scenarios/dice.mp4"}],es=[{question:"Scenarios.Halloween.need-a-boost",answer:"Scenarios.Halloween.recharge",characterIds:["MWC64HS9kkIMP8baHeX4f5tpBlNlw0S23KfzRQ_9qOs","6FY-aN-R6QuuQeF5t4zAE7hAXIKLhyIuAPWZPYn1SZU"],videoSrc:"https://characterai.io/static/editorial/scenarios/spookyBeach.mp4"},{question:"Scenarios.Halloween.resurrect",answer:"Scenarios.Halloween.humors",characterIds:["dDBq2WukbvSOLcBpY90LRqAPPUpxYn-I9qhtXMSE1wU","-tC6vJKvAnHCELnPUa4cjIIeMNfSr7vsGQwsFmapI2k"],videoSrc:"https://characterai.io/static/editorial/scenarios/spookyWine.mp4"}],en=new Set(["en-US","en-CA","en-GB","en-AU","en-NZ","en-IE"]),ei=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&en.has(e)?es:el};function ec(e){var t;let{locale:a}=e,[l,s]=(0,v.useState)(0),n=(0,B.useGate)(D.F5.HalloweenScenarios,!1).value,i=(0,v.useMemo)(()=>(0,d.Sy)(ei(a,n),new Date().getUTCDay()),[n,a]),c=(0,v.useCallback)(()=>s(e=>(e+1)%i.length),[i]);return(0,v.useEffect)(()=>{let e=setTimeout(()=>c(),15e3);return()=>clearTimeout(e)},[c,l]),(0,r.jsxs)(L.a2,{className:"rounded-lg gap-10 bg-background items-center justify-between hidden xl:flex my-6 relative pb-6",children:[(0,r.jsx)(ea,{scenario:i[l],flipScenario:c}),(0,r.jsx)(Q.M,{children:(0,r.jsx)(Z.tq,{slidesPerView:"auto",style:{marginRight:4},cssMode:!0,children:null===(t=i[l])||void 0===t?void 0:t.characterIds.map((e,t)=>(0,r.jsx)(Z.o5,{style:{width:"auto"},className:"px-2",children:(0,r.jsx)(w.E.div,{variants:er,initial:"hidden",animate:"visible",custom:t,children:(0,r.jsx)(J,{characterId:e})},t)},t))})})]},l)}var eo=a(13074);let ed=e=>{let{category:t,enabled:a=!0}=e,{user:r}=(0,c.a)(),l=o.h.discovery.charactersByCurated.useQuery({category:t},{cacheTime:u.Rt,staleTime:u.Rt,refetchInterval:u.Rt,enabled:!!r&&a}).data,s=o.h.discovery.charactersByCuratedAnon.useQuery({category:t},{cacheTime:u.Rt,staleTime:u.Rt,refetchInterval:u.Rt,enabled:!r&&a}).data;return null!=l?l:s};function eu(){var e,t;let{user:a}=(0,c.a)();if(a){let{data:t}=o.h.discovery.curatedCategories.useQuery(void 0,{cacheTime:u.sr,staleTime:u.sr,refetchInterval:u.sr});return{categories:null!==(e=null==t?void 0:t.categories)&&void 0!==e?e:[]}}let{data:r}=o.h.discovery.curatedCategoriesAnon.useQuery(void 0,{cacheTime:u.sr,staleTime:u.sr,refetchInterval:u.sr});return{categories:null!==(t=null==r?void 0:r.categories)&&void 0!==t?t:[]}}var eh=a(10661),em=a(73556),ex=a(97679),ef=a(92262),ep=a(5632);let ev=v.forwardRef((e,t)=>{let{character_id:a,referrer:l,onCallback:s}=e,{t:n}=(0,F.$G)(),[i,c]=(0,v.useState)(!1),u=(0,ef.bA)(a),h=(0,p.usePathname)(),m=(0,ep.useRouter)(),x=o.h.useUtils(),f=(0,v.useCallback)(async()=>{c(!0),ee.iN.elementClicked({character_id:a,type:"HideCharacterButton",referrer:l}),await u(),d.nN.chat(a)===h&&await m.push("/"),await x.discovery.invalidate(),c(!1),s()},[u,m,h,a,x,s,l]);return(0,r.jsx)(j.zx,{isLoading:i,ref:t,variant:"ghost",className:"justify-start text-sm hover:bg-accent rounded-spacing-s",onPress:f,preventDefault:!0,children:n("Common.hide-character")})});ev.displayName="HideCharacterButton";var eg=a(82451),ej=a(57894),ey=a(8799);function ew(e){let{characterId:t,className:a,onCallback:l,recentCharacter:n,creatorName:i}=e,{t:c}=(0,F.$G)(),[o,u]=(0,v.useState)(!1),h=(0,eh.YQ)();return(0,r.jsx)("div",{className:(0,s.cn)("opacity-0 group-hover:opacity-40 hover:opacity-100 bottom-0 right-0 transition-all group-hover:delay-400",{"opacity-100":o,"opacity-40":h},a),children:(0,r.jsxs)(ej.h_,{open:o,onOpenChange:e=>{u(e),null==l||l(e)},children:[(0,r.jsx)(ej.$F,{asChild:!0,children:(0,r.jsx)(j.zx,{className:"min-w-unit-6 w-unit-6 h-unit-6 bg-background",variant:"ghost",size:"sm",isIconOnly:!0,onPress:()=>{u(!0),null==l||l(!0)},preventDefault:!0,name:c("Home.more-options"),"aria-label":c("Home.more-options"),children:(0,r.jsx)(ey.evw,{})})}),(0,r.jsxs)(ej.AW,{align:"end",className:(0,s.cn)("flex flex-col rounded-spacing-m overflow-hidden shadow-md"),children:[!!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ej.Xi,{asChild:!0,children:(0,r.jsx)(j.zx,{variant:"ghost",className:"justify-start max-w-36",as:W(),href:d.nN.profile(i),children:(0,r.jsxs)("span",{className:"w-full truncate",children:["@",i]})})}),(0,r.jsx)(ej.VD,{})]}),(0,r.jsx)(ej.Xi,{asChild:!0,children:n?(0,r.jsx)(eg.y,{character_id:t,referrer:"CharacterCard",onCallback:()=>{u(!1),null==l||l(!1)}}):(0,r.jsx)(ev,{character_id:t,referrer:"CharacterCard",onCallback:()=>{u(!1),null==l||l(!1)}})})]})]})})}let eN=e=>{let t=new URL(d.Wj.getCDNImageSource(e,d.t7.LARGE400));return t.searchParams.set("webp","true"),t.searchParams.set("anim","0"),t.toString()},eb=e=>{let{name:t,avatar_file_name:a,external_id:l,referrer:n,title:i,recentCharacter:o,user__username:u}=e,{user:h}=(0,c.a)(),m=(0,v.useMemo)(()=>(0,d.yC)(t),[t]);return(0,r.jsxs)("div",{className:"relative h-full w-full group",children:[(0,r.jsx)(K.Z,{href:d.nN.chat(l),"aria-label":"Character: ".concat(t),analytics:{name:"characterSelected",properties:{title:i,referrer:n||"FlexCharacterCard",character_id:l}},children:(0,r.jsxs)("div",{className:(0,s.cn)("flex justify-center items-center h-full w-full bg-cover bg-no-repeat bg-center rounded-spacing-s",{[m]:!a}),style:{backgroundImage:a?"url(".concat(eN(a),")"):void 0},children:[!a&&(0,r.jsx)("div",{className:"text-3xl opacity-75",children:t[0]}),(0,r.jsx)("div",{className:"absolute h-full w-full top-0 left-0 z-10 bg-gradient-to-t from-background to-40%"}),(0,r.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-full text-center text-sm line-clamp-2 px-1.5 text-ellipsis z-10",children:t})]})}),!!h&&(0,r.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,r.jsx)(ew,{characterId:l,recentCharacter:o,creatorName:u})})]})};var eS=a(68741);function eC(e){let{name:t,image:a,user__username:l,greeting:n,title:i,participant__num_interactions:c,upvotes:o,index:h}=e;return(0,r.jsx)("div",{className:(0,s.cn)("group/card h-[146px] bg-surface-elevation-1 hover:cursor-pointer hover:bg-scrim-8 rounded-spacing-m relative"),style:{width:u.Rn},children:(0,r.jsx)("div",{className:"w-full h-full p-4 flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex flex-row h-full space-x-3 w-full",children:[(0,r.jsx)(V.B7,{name:t,size:90,height:114,cdnOverride:d.t7.MEDIUM200,circle:!1,src:a,priority:h?h<4:void 0}),(0,r.jsxs)("div",{className:"overflow-auto h-full flex flex-col justify-between w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-[2px] text-md-medium leading-tight line-clamp-1 text-ellipsis break-anywhere overflow-hidden whitespace-normal",children:t}),!!l&&(0,r.jsx)(eS.f,{author:l,className:"mb-[5px]",clickable:!1,link:!1}),(0,r.jsx)("p",{className:"text-foreground font-normal line-clamp-3 text-sm text-ellipsis overflow-hidden whitespace-normal break-anywhere",children:i||n})]}),null!=c&&(0,r.jsx)("div",{className:"w-full flex flex-row justify-between items-center",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,r.jsx)(y.kB,{width:"14px",height:"14px",className:"text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,d.HN)(c)})]}),!!o&&(0,r.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,r.jsx)(y.lb,{width:"14px",height:"14px",className:"text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,d.HN)(o)})]})]})})]})]})})})}function e_(){return(0,r.jsx)("div",{className:"w-[312px] h-[146px] bg-surface-elevation-2 rounded-3xl",children:(0,r.jsxs)("div",{className:"p-4 flex flex-row h-full space-x-3",children:[(0,r.jsx)($.O,{className:"w-[90px] h-[122px] rounded-2xl"}),(0,r.jsxs)("div",{className:"h-full w-full overflow-auto space-y-2",children:[(0,r.jsx)($.O,{className:"h-4 w-full "}),(0,r.jsx)($.O,{className:"h-4 w-full"}),(0,r.jsx)("div",{className:"h-4 w-full"}),(0,r.jsx)($.O,{className:"h-4 w-full"}),(0,r.jsx)($.O,{className:"h-4 w-full"})]})]})})}function ek(e){let{characters:t,title:a,titleAvatarProps:l,hideTitle:n,slimCharacterCards:i}=e,c=(0,v.useRef)(null);(0,eh.Zq)(c);let o=()=>n?null:a&&l?(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center w-full line-clamp-2",children:[(0,r.jsx)(V.B7,{...l}),(0,r.jsx)("p",{className:"w-full text-lg-medium text-ellipsis break-words line-clamp-2",children:a})]}):(0,r.jsx)("p",{className:"text-lg-medium",children:a});if(null==t||0===t.length){let e=Array(10).fill(0).map((e,t)=>(0,r.jsx)("div",{children:(0,r.jsx)(e_,{})},"$loading-".concat(t)));return(0,r.jsxs)("div",{className:"w-full h-full",children:[(0,r.jsxs)("div",{className:"mb-4 ml-4",children:[o(),(0,r.jsx)("div",{})]}),(0,r.jsx)("div",{className:"flex flex-row overflow-hidden space-x-2",children:e})]})}let u=[ex.Gk,ex.W_,ex.Rv];return R.tq&&u.push(ex.tl),(0,r.jsxs)("div",{className:"w-full h-full",children:[(0,r.jsxs)("div",{className:(0,s.cn)("mb-4 ml-4",i&&"ml-0"),children:[o(),(0,r.jsx)("div",{})]}),(0,r.jsx)("div",{ref:c,children:(0,r.jsx)(Z.tq,{slidesPerView:"auto",mousewheel:{forceToAxis:!0},freeMode:!0,autoHeight:R.tq,cssMode:R.tq,navigation:!0,modules:u,className:"shelfSwiper w-full",watchSlidesProgress:!0,children:t.map((e,t)=>(0,r.jsx)(Z.o5,{style:{width:R.tq?"fit-content":"auto"},className:"pr-2 last:pr-0",children:i?(0,r.jsx)("div",{className:"w-24 h-32",children:(0,r.jsx)(eb,{...e,title:a,referrer:"HomeShelf",recentCharacter:!0})}):(0,r.jsx)(K.Z,{href:d.nN.chat(e.external_id),"aria-label":"Character: ".concat(e.participant__name),analytics:{name:"characterSelected",properties:{title:a,referrer:"HomeShelf",character_id:e.external_id}},className:"flex w-fit group",children:(0,r.jsx)(eC,{...e,image:e.avatar_file_name,name:e.participant__name||e.name,index:t})})},e.external_id))})})]})}let eI={Helpers:"Assistants","Game Characters":"Entertainment & Gaming",Comedy:"Humor",Politics:"History",Philosophy:"History",Books:"Creativity & Writing","Language Learning":"Learning",Games:"RPG & Puzzles"},eA={"homework-study-help":"School & Homework","personal-growth":"Health & Wellness","fitness-exercise":"Health & Wellness","meditation-mindfulness":"Lifestyle","video-games":"Entertainment & Gaming","books-reading":"Writing","movies-tv":"Entertainment & Gaming",writing:"Writing","career-advice":"Advice & Connection","language-learning":"Language Learning","personal-finance":"Assistants","productivity-time-management":"Assistants",sports:"Entertainment & Gaming",anime:"Anime","cooking-nutrition":"Assistants","travel-culture":"Lifestyle","relationships-social-advice":"Advice & Connection","news-current-events":"Assistants","mental-health-support":"Advice & Connection","coding-programming":"Assistants","spirituality-religion":"Lifestyle","games-puzzles":"Games & Puzzles",comedy:"Humor","interactive-storytelling":"Creativity"},eH=e=>{let{userInterests:t=[]}=e,{categories:a}=eu(),{t:l}=(0,F.$G)(),n=(0,v.useRef)(null);(0,eh.Zq)(n);let i=[ex.Gk,ex.W_,ex.Rv],c=(0,v.useMemo)(()=>{if(0===a.length)return[];let e=new Set;for(let r of t){let t=eA[r];if(t){if(a.includes(t))e.add(t);else{let a=eI[t];a&&e.add(a)}}}return a.forEach(t=>e.add(t)),Array.from(e)},[a,t]),d=c[0],[m,x]=(0,v.useState)(d),{characters:f}=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.x4,r=ed({category:(a||u.x4).trim()}),{recommendedCharacters:l}=h(),{data:s}=o.h.discovery.featured.useQuery(void 0,{cacheTime:u.yV,staleTime:u.yV,refetchInterval:u.yV});if(null==r?void 0:r.characters){let t=[...l,...null!==(e=null==s?void 0:s.characters)&&void 0!==e?e:[]].map(e=>e.external_id);return{characters:r.characters.filter(e=>!t.includes(e.external_id))}}return{characters:null!==(t=null==r?void 0:r.characters)&&void 0!==t?t:null}}(m);return R.tq&&i.push(ex.tl),(0,v.useEffect)(()=>{m||x(d)},[m,d]),(0,r.jsxs)(eo.mQ,{className:"w-full flex flex-col mt-2",tabIndex:-1,value:m,onValueChange:x,children:[(0,r.jsx)(eo.dr,{className:"w-full flex justify-start items-start",ref:n,children:(0,r.jsx)(Z.tq,{slidesPerView:"auto",mousewheel:{forceToAxis:!0},freeMode:!0,autoHeight:R.tq,cssMode:R.tq,navigation:!R.tq,modules:i,className:(0,s.cn)("shelfSwiper","w-full"),watchSlidesProgress:!0,children:c.map(e=>(0,r.jsx)(Z.o5,{style:{width:"auto"},className:"px-1",children:(0,r.jsx)(eo.SP,{value:e,className:"mb-6 border-b-none rounded-spacing-s my-0 text-md-medium p-3 data-[state=active]:text-primary-foreground data-[state=active]:bg-primary data-[state=inactive]:bg-surface-elevation-2",children:em.Ml[e]?l("Categories.".concat(em.Ml[e])):l("Feed.Categories.".concat(e))})},e))})}),c.map(e=>(0,r.jsx)(eo.nU,{value:e,className:"w-full",children:(0,r.jsx)("li",{className:"mb-6",children:(0,r.jsx)(ek,{characters:f,title:e,hideTitle:!0})})},e))]})};var eq=a(1086);let eG=e=>{let{colElems:t,renderGridCard:a}=e,l=t.map(e=>a(e));return(0,r.jsx)("div",{className:(0,s.cn)("w-full flex flex-col gap-2"),children:l})},ez=e=>{let{grid:t,renderGridCard:a}=e,l=(0,v.useRef)(null);(0,eh.Zq)(l);let s=[ex.Gk,ex.W_,ex.Rv];return R.tq&&s.push(ex.tl),(0,r.jsx)("div",{className:"relative group w-full flex",ref:l,children:(0,r.jsx)(Z.tq,{slidesPerView:"auto",mousewheel:{forceToAxis:!0},freeMode:!0,cssMode:R.tq,navigation:!0,modules:s,className:"shelfSwiper",watchSlidesProgress:!0,children:t.map((e,t)=>(0,r.jsx)(Z.o5,{style:{width:"auto"},className:"px-1",children:(0,r.jsx)(eG,{colElems:e,renderGridCard:a})},"col-".concat(t)))})})};var eE=a(14256);let eP=e=>{let{voice:t}=e;if(!t)return(0,r.jsx)($.O,{className:"h-[88px] min-w-[200px] rounded-spacing-s",style:{width:u.Rn}});let a=d.qL.voice(t.id);return(0,r.jsxs)(K.Z,{style:{width:u.Rn},className:"min-w-[200px] h-[88px] flex flex-row gap-2 p-3 items-center bg-surface-elevation-1 hover:bg-scrim-8 rounded-spacing-s",href:a,analytics:{name:"linkHandled",properties:{link:a,referrer:"VoiceCard"}},shallow:!0,children:[(0,r.jsx)(eE.K,{id:t.id,preventDefault:!0,className:"min-w-14 min-h-14 border-4"}),(0,r.jsxs)("div",{className:"flex flex-col items-start min-h-full",children:[(0,r.jsx)("p",{className:"line-clamp-2 text-ellipsis",children:null==t?void 0:t.name}),(0,r.jsx)("p",{className:"line-clamp-2 text-ellipsis text-muted-foreground text-md",children:null==t?void 0:t.description})]})]})},eR=e=>{let{key:t,voice:a}=e;return(0,r.jsx)(eP,{voice:a},t)},eF=()=>{var e;let{t}=(0,F.$G)(),{user:a}=(0,c.a)(),l=(0,x.Ui)(),o=(0,i.wz)(n.b.RecentChatShelf)&&!l,{featuredVoices:d,isLoading:u}=(0,eq.yo)(),h=u?[[{key:"loading-1"}],[{key:"loading-2"}],[{key:"loading-3"}],[{key:"loading-4"}]]:null!==(e=null==d?void 0:d.map(e=>[{key:e.id,voice:e}]))&&void 0!==e?e:[];return a&&0!==h.length?(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4 mb-4",children:[(0,r.jsx)("p",{className:(0,s.cn)("ml-4 text-lg-medium",o&&"ml-0"),children:t("Voice.voices")}),(0,r.jsx)(ez,{grid:h,renderGridCard:eR})]}):null};var eM=a(47584);let eO=[{characterId:"YpuGnNPQiGvb0DIg77pDUruORvqEPQAxmabNuOIGylo",questionKey:"WhoWouldWin"},{characterId:"6HhWfeDjetnxESEcThlBQtEUo0O8YHcXyHqCgN7b2hY",questionKey:"ElonMusk"},{characterId:"W4MWmsvbFFnKF8b9e3Eg6ZUNzdhqvEZYy-tNRtxB_Og",questionKey:"AlternateTimeline"},{characterId:"GxP9L6QQ-qocxM9sYfvwywDw6wwfSmBJUjalAlD1ZCY",questionKey:"DebateChampion"},{characterId:"YntB_ZeqRq2l_aVf2gWDCZl4oBttQzDvhj9cXafWcF8",questionKey:"CharacterAssistant"},{characterId:"7yDt2WH6Y_OpaAV4GsxKcY5xIQ8QT5M0kgpDQ6VAflI",questionKey:"AreYouFeelingOkay"}],eT=e=>{let{noTitleMargin:t}=e,{t:a}=(0,F.$G)(),l=(0,v.useMemo)(()=>(0,d.Sy)(eO.map(e=>[e])),[]);return(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4 mb-4 pr-2",children:[(0,r.jsx)("p",{className:(0,s.cn)("ml-4 text-lg-medium",t&&"ml-0"),children:a("Feed.try-saying")}),(0,r.jsx)(ez,{grid:l,renderGridCard:e=>(0,v.createElement)(eM.ZI,{...e,key:e.characterId})})]})},eW=e=>{let{name:t,characterId:a,label:l,avatar_file_name:s}=e,{t:n}=(0,F.$G)(),i=d.nN.chat(a);return(0,r.jsxs)(K.Z,{style:{width:u.Rn},className:"min-w-[200px] flex flex-row gap-2 p-3 items-center bg-surface-elevation-1 hover:bg-scrim-8 rounded-spacing-s",href:i,analytics:{name:"characterSelected",properties:{link:i,referrer:"UseCaseCard",characterId:a}},children:[(0,r.jsx)(V.B7,{name:t,size:54,src:s}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("p",{className:"line-clamp-1 text-ellipsis",children:l}),(0,r.jsx)("p",{className:"line-clamp-1 text-ellipsis text-muted-foreground text-md",children:n("Feed.with-character",{name:t})})]})]})},eU=e=>{let{characterId:t,label:a}=e,{info:l}=(0,X.Z)(t);if(!l||!l.character||!l.character.name)return(0,r.jsx)($.O,{className:"h-20 min-w-[200px] rounded-spacing-s",style:{width:u.Rn}});let{character:s}=l;return(0,r.jsx)(eW,{characterId:t,label:a,name:s.name,avatar_file_name:s.avatar_file_name})},eL=e=>[[{characterId:"A9zlEuzpvWiH8h0PNWEvZPK-PQifYxS-V24D3ncqIyU",label:e("Feed.UseCases.practice-a-new-language")},{characterId:"uD71krOYYFjVkYwspviH_8tYTybsf5eAGdwhNlFJAls",label:e("Feed.UseCases.plan-a-trip")}],[{characterId:"f4hEGbw8ywUrjsrye03EJxiBdooy--HiOWgU2EiRJ0s",label:e("Feed.UseCases.practice-interviewing")},{characterId:"9ZSDyg3OuPbFgDqGwy3RpsXqJblE4S1fKA_oU3yvfTM",label:e("Feed.UseCases.write-a-story")}],[{characterId:"Hu84TYGgte3qVoQuy75x6Q1-ORjQbgoe2qaFoTkjaOM",label:e("Feed.UseCases.brainstorm-ideas")},{characterId:"M5xMXf4FKepKTYtWPqVaEZzuEuy90uu0eNZr4GZtDsA",label:e("Feed.UseCases.play-a-game")}],[{characterId:"WLcau8HDbkAPlnU9GPZvLVQ4QaWMhktCmgGFgG2nb5c",label:e("Feed.UseCases.get-book-recommendations")},{characterId:"9wIR0NXzqD76sfJWRsHCGGb8IkPljhINj8WDy_2xjcg",label:e("Feed.UseCases.help-me-make-a-decision")}]],eQ=e=>(0,r.jsx)(eU,{...e},e.characterId),eZ=()=>{let{t:e}=(0,F.$G)(),t=(0,x.Ui)(),a=(0,i.wz)(n.b.RecentChatShelf)&&!t;return(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4 mb-4",children:[(0,r.jsx)("p",{className:(0,s.cn)("ml-4 text-lg-medium",a&&"ml-0"),children:e("Feed.try-these")}),(0,r.jsx)(ez,{grid:eL(e),renderGridCard:eQ})]})};function eD(e){var t,a;let{locale:l}=e;(0,i.Xu)("Home"),g();let{user:o}=(0,c.a)(),d=(0,x.Ui)(),u=(0,i.wz)(n.b.RecentChatShelf)&&!d&&!!o,h=null!==(a=null==o?void 0:null===(t=o.interests)||void 0===t?void 0:t.selected)&&void 0!==a?a:[],m=h.filter(e=>e).length>0;return(0,r.jsxs)("div",{className:(0,s.cn)("pl-2 md:pl-0 mt-2",!o&&"pt-8"),children:[(0,r.jsx)(ec,{locale:l}),!!u&&(0,r.jsx)(eB,{}),!!m&&(0,r.jsx)(eH,{userInterests:h}),!!o&&(0,r.jsx)(eV,{}),!o&&(0,r.jsx)(eY,{}),(0,r.jsx)(eZ,{}),(0,r.jsx)(eK,{dedupe:!!o}),(0,r.jsx)(eF,{}),!m&&(0,r.jsx)(eH,{}),(0,r.jsx)(eT,{}),(0,r.jsx)(U,{})]})}let eB=e=>{let{className:t=""}=e,{t:a}=(0,F.$G)(),{recentCharacters:l}=(0,m.Z)();if(0===l.length)return null;let n=null==l?void 0:l.map(e=>({external_id:e.character_id,avatar_file_name:e.avatar_file_name||"",participant__name:e.name,name:e.name}));return(0,r.jsx)("li",{className:(0,s.cn)("mb-6",t),children:(0,r.jsx)(ek,{characters:n,title:a("Guide.recent-chats"),slimCharacterCards:!0})})},eV=()=>{let{recommendedCharacters:e}=h(),{t}=(0,F.$G)();return(0,r.jsx)("li",{className:"mb-6",children:(0,r.jsx)(ek,{characters:e,title:t("Feed.for-you")})},t("Feed.for-you"))},eY=()=>{let{recommendedCharacters:e}=h(),{t}=(0,F.$G)();return(0,r.jsx)("li",{className:"mb-6",children:(0,r.jsx)(ek,{characters:e,title:t("Feed.for-you")})},t("Feed.for-you"))},eK=e=>{let{dedupe:t}=e,{featuredCharacters:a}=function(e){var t,a;let{recommendedCharacters:r,isLoading:l}=h(),{data:s,isLoading:n}=o.h.discovery.featured.useQuery(void 0,{cacheTime:u.yV,staleTime:u.yV,refetchInterval:u.yV});if(e){let e=(0,d.Ht)(r,null!==(t=null==s?void 0:s.characters)&&void 0!==t?t:[]);return{featuredCharacters:null!=e?e:[],isLoading:l||n}}return{featuredCharacters:null!==(a=null==s?void 0:s.characters)&&void 0!==a?a:[],isLoading:n}}(t),{t:l}=(0,F.$G)();return(0,r.jsx)("li",{className:"mb-6",children:(0,r.jsx)(ek,{characters:a,title:l("Feed.featured")})},l("Feed.featured"))};var e$=a(94359),eX=a(12035);let eJ=(0,v.forwardRef)((e,t)=>{let{children:a}=e;return(0,r.jsx)("div",{ref:t,className:"w-full aspect-square",children:a})});eJ.displayName="FlexGridItem";var e0=a(83542),e1=function(e,t){var a=(0,v.useState)(null),r=a[0],l=a[1];return(0,v.useEffect)(function(){if(e.current&&"function"==typeof IntersectionObserver){var a=new IntersectionObserver(function(e){l(e[0])},t);return a.observe(e.current),function(){l(null),a.disconnect()}}return function(){}},[e.current,t.threshold,t.root,t.rootMargin]),r};let e2=e=>{var t,a;let{value:l,onChange:n}=e,{t:i}=(0,F.$G)(),{categories:c}=eu(),o=(0,v.useRef)(null),d=(0,v.useRef)(null),u=(0,v.useRef)(null),h=["All",...c],m=null===(t=e1(o,{root:u.current,threshold:.9}))||void 0===t?void 0:t.isIntersecting,x=null===(a=e1(d,{root:u.current,threshold:.9}))||void 0===a?void 0:a.isIntersecting,f=e=>{let t=e.currentTarget;e.stopPropagation();let a=t.scrollWidth-t.offsetWidth;e.shiftKey?(e.preventDefault(),t.scrollBy({left:e.deltaY})):(t.scrollLeft+e.deltaX<0||t.scrollLeft+e.deltaX>a)&&(e.preventDefault(),t.scrollLeft=Math.max(0,Math.min(a,t.scrollLeft+e.deltaX)))};(0,v.useEffect)(()=>{let e=u.current;return null==e||e.addEventListener("wheel",f,{passive:!1}),()=>{null==e||e.removeEventListener("wheel",f)}},[]);let p=e=>0===e&&o||e===h.length-1&&d||null;return(0,r.jsxs)("div",{className:"sticky top-0 z-30 h-16 w-full group overflow-hidden",children:[(0,r.jsx)(Q.M,{children:!m&&(0,r.jsx)(w.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,s.cn)("absolute left-0 h-full w-16 bg-gradient-to-r from-background to-transparent cursor-pointer flex items-center"),onClick:()=>{var e;null===(e=u.current)||void 0===e||e.scrollBy({left:-250,behavior:"smooth"})},children:(0,r.jsx)("div",{className:"px-2 py-3 opacity-0 pointer-fine:group-hover:opacity-100 transition-all",children:(0,r.jsx)(y.XC,{className:"h-6 w-6 text-foreground rotate-180"})})})}),(0,r.jsx)(Q.M,{children:!x&&(0,r.jsx)(w.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,s.cn)("absolute right-0 h-full w-16 bg-gradient-to-l from-background to-transparent cursor-pointer flex items-center justify-end"),onClick:()=>{var e;null===(e=u.current)||void 0===e||e.scrollBy({left:250,behavior:"smooth"})},children:(0,r.jsx)("div",{className:"px-2 py-3 opacity-0 pointer-fine:group-hover:opacity-100 transition-all",children:(0,r.jsx)(y.XC,{className:"h-6 w-6 text-foreground"})})})}),(0,r.jsx)("div",{className:"overflow-x-scroll scrollbar-hide bg-background h-full flex items-center",ref:u,children:(0,r.jsx)(eo.mQ,{tabIndex:-1,value:l,onValueChange:n,children:(0,r.jsx)(eo.dr,{className:"h-auto w-full flex justify-start items-start gap-2 pl-0",children:h.map((e,t)=>(0,r.jsx)(eo.SP,{value:e,className:"h-10 mb-6 border-b-none rounded-spacing-s my-0 p-3 data-[state=active]:text-primary-foreground data-[state=active]:bg-primary data-[state=inactive]:bg-surface-elevation-2",ref:p(t),children:i("Categories.".concat(em.Ml[e]))},e))})})})]})},e4=(0,v.forwardRef)((e,t)=>{let{children:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-flex gap-4",style:{"--feed-item-width":"".concat(140,"px")},ref:t,children:a})});function e6(e){let{children:t}=e;return(0,r.jsx)("div",{className:"col-span-full mt-3 mb-2 border-y-1 py-3",children:t})}function e3(){g();let{user:e}=(0,c.a)(),[t,a]=(0,v.useState)("All"),{data:l}=o.h.discovery.characterFeed.useQuery(void 0,{enabled:!!e}),{data:n}=o.h.discovery.characterFeedAnonymous.useQuery(void 0,{enabled:!e}),i=e?l:n,d=ed({category:t,enabled:"All"!==t}),[u,h]=(0,v.useState)([]),{recentCharacters:x}=(0,m.Z)(),f=(0,v.useRef)(null),p=(0,v.useRef)(null),j=e1(p,{root:null,rootMargin:"0px",threshold:.5}),[y,w]=(0,v.useState)(6),[N,b]=(0,v.useState)(20),S=(0,v.useRef)(null),C=(0,v.useRef)({}),_=(0,v.useMemo)(()=>{var e,a,r,l,s;return"All"!==t?((r=C.current)[t]||(r[t]=null==d?void 0:d.characters),null!==(l=null===(a=C.current[t])||void 0===a?void 0:a.filter(e=>!!e.avatar_file_name))&&void 0!==l?l:[]):null!==(s=null==i?void 0:null===(e=i.characters)||void 0===e?void 0:e.filter(e=>!!e.avatar_file_name))&&void 0!==s?s:[]},[t,null==i?void 0:i.characters,d]),k=N<_.length;(0,v.useEffect)(()=>{let e=Math.ceil(Math.min(N,_.length)/y),t=[];for(let a=0;a<e;a++){let e=_.slice(a*y,(a+1)*y);e.length>0&&e.length===y&&t.push(e)}h(t)},[_,y,N]),(0,v.useEffect)(()=>{window.scrollTo({top:0})},[t]);let I=(0,v.useCallback)(()=>{var e;f.current&&w(Math.max(Math.floor(((null===(e=f.current)||void 0===e?void 0:e.clientWidth)+16)/156),1))},[]);(0,e0.yU)({ref:f,onResize:I}),(0,v.useEffect)(()=>((null==j?void 0:j.isIntersecting)?S.current=setTimeout(()=>{b(e=>e+20)},500+500*Math.random()):S.current&&(clearTimeout(S.current),S.current=null),()=>{S.current&&(clearTimeout(S.current),S.current=null)}),[j]);let A={2:x.length>0?(0,r.jsx)(eB,{className:"mb-0"}):null,[e?4:2]:(0,r.jsx)(eT,{noTitleMargin:!0}),[e?12:5]:(0,r.jsx)(U,{})};return(0,r.jsxs)("div",{className:(0,s.cn)("mx-2",!e&&"pt-8"),children:[(0,r.jsx)(e2,{value:t,onChange:e=>{b(20),a(e)}}),(0,r.jsx)(e4,{ref:f,children:"All"===t&&i||d?(0,r.jsxs)(r.Fragment,{children:[u.map((e,a)=>(0,r.jsxs)(v.Fragment,{children:["All"===t&&!!A[a]&&(0,r.jsx)(e6,{children:A[a]}),e.map(e=>(0,r.jsx)(eJ,{children:(0,r.jsx)(eb,{...e,referrer:"HomeFeed"})},e.external_id))]},"".concat(a,"-").concat(e.length))),!!k&&Array.from({length:2*y}).map((e,t)=>(0,r.jsx)(eJ,{ref:0===t?p:null,children:(0,r.jsx)($.O,{className:"w-full h-full"})},"skeletion-".concat(t)))]}):Array.from({length:50}).map((e,t)=>(0,r.jsx)(eJ,{children:(0,r.jsx)($.O,{className:"w-full h-full"})},"skeletion-".concat(t)))})]})}e4.displayName="FlexGrid";var e5=!0;let e8="experimental-edge",e7=e=>{let{locale:t}=e;return((0,eX.O)(),(0,i.wz)(n.b.HomeFeed))?(0,r.jsx)(e3,{}):(0,r.jsx)(eD,{locale:t})};e7.getLayout=function(e,t){return(0,r.jsxs)("div",{className:(0,s.cn)("flex flex-col justify-between px-4 sm:px-8 pt-6",{"px-0":R.tq}),children:[(0,r.jsx)("title",{children:t("Home.title")}),(0,r.jsxs)("div",{className:"max-w-7xl self-center w-full",children:[(0,r.jsx)("div",{className:"pb-4 pr-2 z-30 bg-background",children:(0,r.jsx)(e$.uN,{})}),(0,r.jsx)("ol",{className:"flex flex-col",children:e})]}),(0,r.jsx)("div",{className:"mt-24 pt-10",children:(0,r.jsx)(l.$,{})})]})},e7.SignedOut=e7;var e9=e7},73556:function(e,t,a){"use strict";var r,l;a.d(t,{Ml:function(){return n},Qo:function(){return r},bq:function(){return s}}),(l=r||(r={})).About="About",l.ChatStarters="ChatStarters",l.SimilarCharacters="SimilarCharacters";let s="About";Object.values(r);let n={All:"all",Trending:"trending",Assistants:"assistants","Games & Puzzles":"games-and-puzzles","School & Homework":"school-and-homework","Role Playing Games":"role-playing-games",Professional:"professional","Entertainment & Gaming":"entertainment-and-gaming",Humor:"humor","Health & Wellness":"health-and-wellness","Language Learning":"language-learning",Anime:"anime",Writing:"writing",Lifestyle:"lifestyle","History & Philosophy":"history-and-philosophy","Advice & Connection":"advice-and-connection",Creativity:"creativity","Sci-Fi":"sci-fi","Creativity & Writing":"writing",Learning:"learning",Parody:"parody","RPG & Puzzles":"rpg-and-puzzles",History:"history"}},47584:function(e,t,a){"use strict";a.d(t,{ZI:function(){return x},fN:function(){return h}});var r=a(52322),l=a(38837),s=a(68741),n=a(80783),i=a(62593),c=a(94766),o=a(98208),d=a(27617),u=a(98614);let h=(e,t)=>"Feed.ExampleChats.".concat(e,".q").concat(t),m=e=>{let{name:t,src:a,creatorUsername:c,numInteractions:o,questionKey:m,characterId:x,upvotes:f}=e,{t:p}=(0,u.$G)();return(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-4 items-start bg-surface-elevation-1 rounded-spacing-s w-[412px]",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,r.jsx)(l.B7,{name:t,size:48,src:a}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-md-medium",children:t}),(0,r.jsxs)("span",{className:"flex flex-row gap-1 text-muted-foreground text-sm",children:[(0,r.jsx)(s.f,{author:c,createdBy:!1}),(0,r.jsx)(n.k,{type:"interactions",num:o,withPrecedingDot:!0}),!!f&&(0,r.jsx)(n.k,{type:"upvotes",num:f,withPrecedingDot:!0})]})]})]}),(0,r.jsx)("div",{className:"w-full flex flex-col gap-1",children:[...[,,,].keys()].map(e=>p(h(m,e))).map((e,t)=>{let a=d.nN.chat(x,new URLSearchParams({questionKey:m,index:t.toString()}).toString());return(0,r.jsx)(i.Z,{className:"w-full rounded-spacing-s p-3 bg-surface-elevation-2 hover:bg-scrim-8",href:a,analytics:{name:"linkHandled",properties:{link:a,referrer:"ExampleChatsCard",type:e}},children:(0,r.jsx)("p",{className:"line-clamp-1 text-ellipsis text-primary text-md",children:e})},"".concat(x,"-example-").concat(t))})})]})},x=e=>{let{characterId:t,questionKey:a}=e,{info:l}=(0,o.Z)(t);if(!l||!l.character||!l.character.name)return(0,r.jsx)(c.O,{className:"h-[230px] w-[412px] rounded-spacing-s"});let{character:s}=l,{name:n,avatar_file_name:i,user__username:d,participant__num_interactions:u,upvotes:h}=s;return(0,r.jsx)(m,{name:n,src:i,creatorUsername:d,numInteractions:u,upvotes:h,questionKey:a,characterId:t})}},94359:function(e,t,a){"use strict";a.d(t,{uN:function(){return z},$C:function(){return P}});var r=a(52322),l=a(63554),s=a(48683),n=a(24632),i=a(74943),c=a(3988),o=a(27617),d=a(11403),u=a(62593);function h(e){var t,a,l,s,n,i;let{user:c}=e;return(0,r.jsxs)(u.Z,{className:"flex",href:o.nN.profile(null!==(n=null===(t=c.user)||void 0===t?void 0:t.username)&&void 0!==n?n:""),analytics:{name:"elementClicked",properties:{referrer:"HomeHeader",target:o.nN.profile(null!==(i=null===(a=c.user)||void 0===a?void 0:a.username)&&void 0!==i?i:"")}},children:[(0,r.jsx)("div",{className:"w-[36px] h-[36px] flex items-center justify-center",children:(0,r.jsx)(d.a,{name:c.name||c.email||"",size:20,src:null===(s=c.user)||void 0===s?void 0:null===(l=s.account)||void 0===l?void 0:l.avatar_file_name,rounded:!0})}),(0,r.jsx)("div",{className:"text-xl flex flex-auto flex-col justify-center text-left ml-1",children:(0,r.jsx)("p",{children:null==c?void 0:c.name})})]})}var m=a(65371),x=a(44460),f=a(50986),p=a(14976),v=a(90122),g=a(23279),j=a(18818),y=a(17063),w=a(5632),N=a(2784),b=a(98614),S=a(76492),C=a(56462);function _(e){let{isSignedOut:t,getCharacterHref:a,placeholder:l,className:s,containerClassName:n,inputClassName:i}=e,{t:c}=(0,b.$G)(),d=(0,j.Dv)(),u=a||o.nN.chat,h=l||c("Search.placeholder"),{searchQuery:m,characterResults:_,isSearchLoading:k,clearSearch:I,onChangeSearchText:A,showSearchError:H,refetchSearch:q,submittedSearchQuery:G}=(0,p.HP)(void 0,!1,p.Sc.characters,"Searchbar"),z=(0,N.useRef)(null),E=(0,w.useRouter)(),P=_&&G;return(0,r.jsxs)("div",{className:n,children:[!!P&&(0,r.jsx)("div",{className:"absolute left-0 top-0 z-30 h-screen w-screen bg-black opacity-30",onClick:I}),(0,r.jsx)("div",{className:(0,y.cn)("relative h-10 w-64 md:w-96",{"md:top-6":!!P&&!t},n),children:(0,r.jsxs)("div",{className:(0,y.cn)("absolute z-40 flex gap-2 w-full max-w-3xl border-spacing-1 border-divider flex-row self-center items-center rounded-full bg-surface-elevation-1 p-4 placeholder:text-placeholder",s),children:[(0,r.jsx)(g.zx,{"aria-label":c("Common.search"),variant:"ghost",isIconOnly:!0,onPress:()=>{if(m.length>0)E.push(o.nN.search(m)),x.iN.searchAttempt({referrer:"Searchbar",query:m});else{var e;null===(e=z.current)||void 0===e||e.focus()}},className:"h-fit min-w-fit w-fit",children:k?(0,r.jsx)(S.$,{size:16}):(0,r.jsx)(v.W1,{height:"1.25em",className:"ml-1"})}),(0,r.jsx)(C.I,{className:(0,y.cn)("rounded-full rounded-l-none border-none bg-transparent placeholder:text-muted-foreground p-0 relative",i),type:"text",ref:z,placeholder:h,onChange:e=>A(e.target.value),value:m,onKeyDown:e=>{"Enter"===e.key&&(E.push(o.nN.search(m)),x.iN.searchAttempt({referrer:"Searchbar",query:m}))}}),!!m&&(0,r.jsx)(g.zx,{variant:"ghost",size:"sm",isIconOnly:!0,className:"mr-2 h-fit min-w-fit w-fit",onPress:I,children:(0,r.jsx)(v.Tw,{height:"1.25em",color:"var(--icon-secondary)"})})]})}),!!H&&(0,r.jsx)("div",{className:"flex max-w-3xl justify-center self-center sm:px-12 ",children:(0,r.jsxs)("div",{className:(0,y.cn)("absolute z-40 mt-2 md:mt-8 flex max-h-[calc(100vh-8rem)] w-96 flex-col overflow-y-scroll rounded-md bg-card px-2",{"md:mt-2":t}),children:[(0,r.jsx)("p",{className:"m-4 text-center",children:c("Search.something-went-wrong-loading-search-results")}),(0,r.jsx)(g.zx,{className:"my-4 w-48 self-center",onPress:()=>{x.iN.searchAttempt({referrer:"Searchbar",type:"retry"}),q()},color:"secondary",children:c("Common.try-again")})]})}),!!P&&(0,r.jsx)("div",{className:"flex max-w-3xl justify-end md:justify-center self-center py-3",children:(0,r.jsxs)("div",{className:(0,y.cn)("absolute z-50 mt-2 md:mt-8 flex max-h-[calc(100vh-8rem)] max-w-[90dvw] sm:w-96 overflow-y-scroll rounded-spacing-l bg-surface-elevation-2 px-2 flex flex-col",{"md:mt-2":t}),children:[!!_&&_.length>0&&_.map(e=>(0,r.jsx)(f.J,{referrer:"Searchbar",src:e.avatar_file_name,href:u(e.external_id),name:e.participant__name,title:e.title?e.title:e.greeting,author:e.user__username,interactions:e.participant__num_interactions,upvotes:e.upvotes,nameClassname:"text-md sm:text-lg",titleClassname:"text-sm sm:text-md",infoClassname:"text-sm sm:text-md",avatarImageSize:d?52:60,searchResultCharacterIds:null==_?void 0:_.map(e=>e.external_id),id:e.external_id},e.external_id)),(null==_?void 0:_.length)===0&&(0,r.jsx)("div",{className:"p-4",children:c("Search.no-results")})]})})]})}var k=a(566),I=a(85129),A=a(25706),H=a(66582),q=a(15584),G=a(48058);function z(){let{user:e}=(0,k.a)();return e?(0,r.jsx)(E,{user:e}):(0,r.jsx)(P,{})}let E=e=>{let{user:t}=e,{t:a}=(0,b.$G)(),l=(0,q.BF)(A.zE);return(0,r.jsxs)("div",{className:(0,y.cn)("flex justify-end items-end lg:justify-between pr-4",{"ml-6 lg:ml-0":!l}),children:[(0,r.jsxs)(i.a2,{className:"hidden lg:flex flex-col gap-1",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:a("Home.welcome-back")}),(0,r.jsx)(h,{user:t})]}),(0,r.jsx)("div",{className:"flex justify-end ml-6 gap-3",children:(0,r.jsx)(_,{isSignedOut:!1})})]})},P=e=>{let{hideSearch:t,className:a}=e,i=(0,q.BF)(A.Z8),{user:d}=(0,k.a)(),{t:h}=(0,b.$G)(),x=(0,j.Dv)(),f=(0,j.Fv)(),{asPath:p}=(0,w.useRouter)(),v=p.startsWith(o.nN.chat("")),g=(0,s.wz)(l.b.SignupPromptOnScroll),N=i||!g&&(!!v||H.tq);(0,I.jB)({disabled:!N});let S=(0,G.useExperiment)(n.F5.SignupToChat).config.get(n.sD.SignupToChat,!1);return d?(0,r.jsx)("div",{className:"flex justify-end items-end pr-4 w-full",children:(0,r.jsx)(_,{isSignedOut:!0})}):(0,r.jsxs)("div",{className:(0,y.cn)("flex gap-3 w-full justify-between fixed top-0 left-0 z-10 bg-background py-5 px-4",a),children:[(0,r.jsxs)("div",{className:(0,y.cn)("flex flex-row",{"w-full":f||t}),children:[(0,r.jsx)(u.Z,{href:o.nN.home(),className:(0,y.cn)("flex items-center mr-6 h-fit",x?"pt-2":"pt-1",{"pl-2":x}),analytics:{name:"linkOpened",properties:{referrer:"HomeHeader",link:o.nN.home()}},children:(0,r.jsx)(c.t,{mini:x})}),(0,r.jsxs)("div",{className:(0,y.cn)("flex flex-row w-full justify-end gap-3",f||t?"justify-end":"justify-start"),children:[(0,r.jsx)(m.Q,{type:"signup",copyOverride:S?h("Signup.toChat"):void 0}),(0,r.jsx)(m.Q,{type:"signin",copyOverride:h("Common.login")})]})]}),!f&&!t&&(0,r.jsx)(_,{placeholder:h("Common.search").toString(),isSignedOut:!0,className:(0,y.cn)("max-w-[412px]",H.tq?"py-[10px] px-2":"p-[10px]"),inputClassName:"placeholder:text-primary",containerClassName:"w-full md:w-full min-[140px] max-w-[412px]"})]})}}},function(e){e.O(0,[4235,8092,2888,9774,179],function(){return e(e.s=87314)}),_N_E=e.O()}]);