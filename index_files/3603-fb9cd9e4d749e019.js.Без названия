"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3603],{97908:function(e,t,a){a.d(t,{v:function(){return c}});var r=a(52322),l=a(23279),n=a(566),s=a(17063),o=a(27617),i=a(87668),u=a(11403),d=a(9394);function c(e){var t;let{user:a,hideRelationship:c,handleClick:f,className:p,rightContent:v}=e,m=(0,n.a)().user,{username:h,account__avatar_file_name:w,account__bio:g}=a;return(0,r.jsxs)(l.zx,{variant:"ghost",as:d.rU,href:o.nN.profile(a.username),analytics:{name:"pageViewed",properties:{page_name:"Profile",referrer:"UserListItemSocial",username:a.username}},className:(0,s.cn)("h-fit flex w-full flex-row justify-between items-center rounded-spacing-xs p-2 gap-3",p),onPress:()=>null==f?void 0:f(),children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(u.a,{name:h||"",size:40,src:w,rounded:!0})}),(0,r.jsxs)("div",{className:"flex flex-1 min-w-0 flex-col justify-center pr-1 overflow-hidden",children:[(0,r.jsx)("p",{className:"text-md truncate",children:a.username}),!!g&&(0,r.jsx)("p",{className:"text-md truncate text-muted-foreground",children:g})]}),!c&&(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(i.e,{username:a.username,requesterUsername:null==m?void 0:null===(t=m.user)||void 0===t?void 0:t.username})}),v]})}},11885:function(e,t,a){a.d(t,{Tu:function(){return v},sw:function(){return u},ue:function(){return p},yo:function(){return i}});var r=a(52322),l=a(70241),n=a(10929),s=a(2784),o=a(17063);let i=l.fC;l.xz;let u=l.x8,d=l.h_,c=s.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-scrim data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});c.displayName=l.aV.displayName;let f=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l border-l-accent data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right max-w-xs"}},defaultVariants:{side:"right"}}),p=s.forwardRef((e,t)=>{let{side:a="right",className:n,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)(f({side:a}),n),...i,children:s})]})});function v(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})}p.displayName=l.VY.displayName,v.displayName="SheetHeader",s.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...n})}).displayName=l.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})}).displayName=l.dk.displayName},87668:function(e,t,a){a.d(t,{e:function(){return d}});var r=a(52322),l=a(44460),n=a(23279),s=a(13964);let o=e=>{let{data:t,isLoading:a}=(0,s.bu)();return{isLoading:a,isFollowing:!!e&&(null!=t?t:[]).includes(e)}};var i=a(55830),u=a(98614);function d(e){let{username:t,requesterUsername:a}=e,{t:d}=(0,u.$G)(),c=(0,i.NL)(),{isFollowing:f}=o(t),p=(0,s.Os)(),v=(0,s.hO)(),m=e=>void c.invalidateQueries([s.Sz.publicUser(e)]),h=async()=>{a&&(f?(l.iN.userSocialAction({referrer:"FollowButton",type:"unfollow"}),v.mutate({username:t,requesterUsername:a},{onSuccess:()=>m(a)})):(l.iN.userSocialAction({referrer:"FollowButton",type:"follow"}),p.mutate({username:t,requesterUsername:a},{onSuccess:()=>m(a)})))};return(0,r.jsx)(n.zx,{onPress:h,preventDefault:!0,isDisabled:!a,variant:f?"ghost":"primary",className:f?"bg-surface-elevation-2 hover:bg-surface-elevation-3":"",children:d(f?"Profile.followButtonFollowing":"Profile.followButton")})}},13964:function(e,t,a){a.d(t,{Ft:function(){return p},Os:function(){return d},QJ:function(){return h},Sz:function(){return o},bu:function(){return u},eq:function(){return v},hO:function(){return c},kP:function(){return m},qY:function(){return f},xS:function(){return i}});var r=a(2784),l=a(61569),n=a(36850),s=a(30538);let o={user:["user"],publicUser:e=>[...o.user,"public",e],publicFollowers:e=>[...o.user,"public","followers",e],publicFollowing:e=>[...o.user,"public","following",e],followers:()=>[...o.user,"followers"],following:()=>[...o.user,"following"],votedFor:e=>[...o.user,"voted-for",e],votes:e=>["votes",e],upvotesByCharacter:e=>["upvotes-by-character",e],upvotedCharacters:()=>[...o.user,"upvoted-characters"]},i=(e,t)=>{let a=(0,s.aM)({queryKey:o.publicUser(e),queryFn:async()=>t?(await (0,l.o)().post("/chat/anon/user/public/",{username:e})).data.public_user:(await (0,l.o)().post("/chat/user/public/",{username:e})).data.public_user,staleTime:1/0});return{user:a.data,...a}},u=()=>{let e=(0,s.aM)({queryKey:o.following(),queryFn:async()=>(await (0,l.o)().get("/chat/user/following/")).data.following,staleTime:1/0});return{following:e.data,...e}},d=()=>{let e=(0,s.NL)();return(0,s.Db)(async e=>{let{username:t,requesterUsername:a}=e;return{...(await (0,l.o)().post("/chat/user/follow/",{username:t})).data,username:t,requesterUsername:a}},{onSuccess:t=>{let{username:a,requesterUsername:r}=t;e.invalidateQueries(o.following()),r&&(e.invalidateQueries(o.publicFollowing(r)),e.invalidateQueries(o.publicUser(r))),e.invalidateQueries(o.publicUser(a)),e.invalidateQueries(o.publicFollowers(a))}})},c=()=>{let e=(0,s.NL)();return(0,s.Db)(async e=>{let{username:t,requesterUsername:a}=e;return{...(await (0,l.o)().post("/chat/user/unfollow/",{username:t})).data,username:t,requesterUsername:a}},{onSuccess:t=>{let{username:a,requesterUsername:r}=t;e.invalidateQueries(o.following()),r&&(e.invalidateQueries(o.publicFollowing(r)),e.invalidateQueries(o.publicUser(r))),e.invalidateQueries(o.publicUser(a)),e.invalidateQueries(o.publicFollowers(a))}})},f=e=>{var t;let a=(0,s.NS)(o.publicFollowers(e),async t=>{let{pageParam:a}=t;return e?(await (0,l.o)().post("/chat/user/public/followers/",{username:e,pageParam:null!=a?a:1})).data:{users:[],has_next_page:!1,meta:{}}},{getNextPageParam:(e,t)=>e.has_next_page?t.length+1:void 0,staleTime:1/0}),n=(0,r.useMemo)(()=>{var e,t,r;return(null!==(r=null===(t=a.data)||void 0===t?void 0:null===(e=t.pages)||void 0===e?void 0:e.flatMap(e=>e.users))&&void 0!==r?r:[]).filter(e=>!!(null==e?void 0:e.username))},[null===(t=a.data)||void 0===t?void 0:t.pages]);return{...a,users:n}},p=e=>{var t;let a=(0,s.NS)(o.publicFollowing(e),async t=>{let{pageParam:a}=t;return e?(await (0,l.o)().post("/chat/user/public/following/",{username:e,pageParam:null!=a?a:1})).data:{users:[],has_next_page:!1,meta:{}}},{getNextPageParam:(e,t)=>e.has_next_page?t.length+1:void 0,staleTime:1/0}),n=(0,r.useMemo)(()=>{var e,t,r;return(null!==(r=null===(t=a.data)||void 0===t?void 0:null===(e=t.pages)||void 0===e?void 0:e.flatMap(e=>e.users))&&void 0!==r?r:[]).filter(e=>!!(null==e?void 0:e.username))},[null===(t=a.data)||void 0===t?void 0:t.pages]);return{...a,users:n}},v=e=>{var t,a;let r=(0,s.aM)({queryKey:o.votedFor(e),queryFn:async()=>(await (0,l.o)().get("/chat/character/".concat(e,"/voted/"))).data,staleTime:1/0});return{voted:null===(t=r.data)||void 0===t?void 0:t.voted,vote:null===(a=r.data)||void 0===a?void 0:a.vote,...r}},m=()=>{let e=(0,s.NL)();return(0,s.Db)(async e=>{let{characterId:t,vote:a}=e;return{...(await (0,l.o)().post("/chat/character/vote/",{external_id:t,vote:a})).data,characterId:t}},{onSuccess:t=>{e.invalidateQueries(o.votes(t.characterId)),e.invalidateQueries(o.votedFor(t.characterId)),e.invalidateQueries(o.upvotedCharacters()),e.invalidateQueries(n.Hc.info.keys(t.characterId))}})},h=e=>{let t=(0,s.aM)({queryKey:o.upvotedCharacters(),queryFn:async()=>(await (0,l.o)().get("/chat/user/characters/upvoted/")).data.characters,staleTime:1/0,enabled:!e});return{characters:t.data,...t}}}}]);